import{j as e}from"./vendor-radix-D9w6Aqn5.js";import{r as l,u as C}from"./vendor-react-BLglcPuh.js";import{B as k,u as d,s as E,a as S}from"./index-C4prtVKG.js";import{I as p}from"./input-rVbishha.js";import{C as A}from"./card-CqIWy9z1.js";import{m as L,G as I,M as D,i as P,E as U,j as R,K as $,k as B,e as O,l as q}from"./vendor-utils-DjjONr6O.js";function G({onLogin:n}){const[a,r]=l.useState("creds"),[o,u]=l.useState(!1),[t,m]=l.useState(""),[x,w]=l.useState(""),[h,j]=l.useState(""),[f,g]=l.useState(!1),v=async i=>{i.preventDefault(),g(!0);try{if(a==="creds"){const s=t.toLowerCase().includes("prof")?"teacher":"student",c=t.split("@")[0].split(/[._-]/).map(b=>b.charAt(0).toUpperCase()+b.slice(1).toLowerCase()).join(" "),N=t.replace(/[^a-zA-Z0-9]/g,"").toLowerCase(),y={id:s==="teacher"?"prof-1":`student-${N||Date.now()}`,name:s==="teacher"?`PROF. ${c||"COORDENADOR"}`:c.toUpperCase()||"ESTUDANTE",email:t.includes("@")?t:`${t}@ceitec.edu`,role:s,avatar:s==="teacher"?"ðŸ‘¨â€ðŸ«":"ðŸ‘¤",xp:s==="teacher"?0:1250};n(s,y),d.success("AutenticaÃ§Ã£o ConcluÃ­da")}else{const{data:s,error:c}=await E.from("students").select("*").eq("access_code",h).single();c||!s?d.error("CÃ³digo InvÃ¡lido",{description:"Acesso negado pela plataforma."}):(n("student",s),d.success(`Bem-vindo, ${s.name.toUpperCase()}`))}}catch{d.error("Erro no Sistema")}finally{g(!1)}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-6 bg-background relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-primary/5 rounded-full blur-[120px] -z-10"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-blue-600/5 rounded-full blur-[120px] -z-10"}),e.jsx(L.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-sm",children:e.jsxs(A,{className:"shadow-2xl border-border rounded-[2.5rem] p-10 bg-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-primary"}),e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary rounded-2xl mb-6 shadow-xl shadow-primary/20 group hover:rotate-6 transition-transform",children:e.jsx(I,{className:"w-8 h-8 text-white"})}),e.jsxs("h1",{className:"text-4xl font-black text-foreground tracking-tight italic uppercase",children:["CEITEC",e.jsx("span",{className:"text-primary italic",children:".EDU"})]}),e.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-[0.2em] mt-2",children:"Tecnologia Criativa e InovaÃ§Ã£o"})]}),e.jsxs("div",{className:"flex bg-muted p-1 rounded-xl mb-8 border border-border",children:[e.jsx("button",{onClick:()=>r("creds"),className:`flex-1 py-2.5 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${a==="creds"?"bg-white text-primary shadow-sm":"text-muted-foreground"}`,children:"Email"}),e.jsx("button",{onClick:()=>r("code"),className:`flex-1 py-2.5 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${a==="code"?"bg-white text-primary shadow-sm":"text-muted-foreground"}`,children:"CÃ³digo"})]}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[a==="creds"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black text-muted-foreground uppercase tracking-widest ml-1",children:"Email_Institucional"}),e.jsxs("div",{className:"relative group",children:[e.jsx(D,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground/50 w-4 h-4 group-focus-within:text-primary transition-colors"}),e.jsx(p,{type:"text",placeholder:"seu@exemplo.com",value:t,onChange:i=>m(i.target.value),className:"pl-11 h-13 bg-muted/20 border-border rounded-xl focus:border-primary transition-all font-medium text-sm",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black text-muted-foreground uppercase tracking-widest ml-1",children:"Protocolo_Senha"}),e.jsxs("div",{className:"relative group",children:[e.jsx(P,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground/50 w-4 h-4 group-focus-within:text-primary transition-colors"}),e.jsx(p,{type:o?"text":"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:x,onChange:i=>w(i.target.value),className:"pl-11 pr-11 h-13 bg-muted/20 border-border rounded-xl focus:border-primary transition-all font-medium text-sm",required:!0}),e.jsx("button",{type:"button",onClick:()=>u(!o),className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground/50 hover:text-primary transition-colors",children:o?e.jsx(U,{className:"w-4 h-4"}):e.jsx(R,{className:"w-4 h-4"})})]})]})]}):e.jsxs("div",{className:"space-y-4 text-center",children:[e.jsx("label",{className:"text-[10px] font-black text-muted-foreground uppercase tracking-widest italic",children:"Acesso por CÃ³digo de AtivaÃ§Ã£o"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-primary w-5 h-5 pointer-events-none"}),e.jsx(p,{placeholder:"ALPHA-SYNC",value:h,onChange:i=>j(i.target.value.toUpperCase()),className:"pl-12 text-center text-xl font-black italic tracking-[0.3em] h-16 rounded-2xl text-primary border-border focus:border-primary transition-all shadow-inner uppercase",required:!0})]})]}),e.jsx(k,{type:"submit",disabled:f,className:"w-full h-14 bg-primary hover:bg-primary/90 text-white font-black rounded-xl shadow-xl shadow-primary/20 transition-all active:scale-[0.98] flex items-center justify-center gap-3 text-xs tracking-widest uppercase italic disabled:opacity-50",children:f?e.jsx(B,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:["Entrar no Sistema",e.jsx(O,{className:"w-4 h-4"})]})})]}),e.jsxs("footer",{className:"mt-10 pt-8 border-t border-border flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2.5 text-[9px] font-black text-muted-foreground uppercase tracking-widest",children:[e.jsx(q,{className:"w-3.5 h-3.5 text-primary/60"})," ConexÃ£o Segura"]}),e.jsx("p",{className:"text-[9px] text-muted-foreground/60 uppercase font-bold tracking-tighter hover:text-destructive transition-colors cursor-pointer",onClick:()=>{localStorage.clear(),window.location.reload()},children:"Resetar ConfiguraÃ§Ãµes Locais"})]})]})})]})}function Y(){const{login:n,isAuthenticated:a,role:r}=S(),o=C();l.useEffect(()=>{if(a&&r){const t=r==="student"?"/student":"/teacher";console.log("[DEBUG] Identificada sessÃ£o ativa. Redirecionando para:",t),o(t,{replace:!0})}},[a,r,o]);const u=(t,m)=>{console.log("[DEBUG] Processando login para:",t),n(t,m),o(t==="student"?"/student":"/teacher",{replace:!0})};return a&&r?e.jsx("div",{className:"min-h-screen bg-[#020617] flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-500"})}):e.jsx(G,{onLogin:u})}export{Y as default};
